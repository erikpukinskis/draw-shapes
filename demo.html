<html><body>

<style>
canvas {
  border: 1px solid #eee;
}
</style>
<script src="../build/draw-scene.js"></script>

<canvas width="400" height="400" onmousedown="startShape(event)"></canvas>

<script>

var handleMove

function startShape(event) {
  var path = [
    [event.clientX, event.clientY]
  ]

  handleMove = addPoint.bind(null, path)
}

function addPoint(path, event) {
  path.push([event.clientX, event.clientY])

  drawScene(pathToShape(path))
}

function pathToShape(path) {
  var shapes = []

  var last = path.length-1

  verticies = [
     path[0][0],  -path[0][1],  0.0,
     path[last][0], -path[last][1],  0.0,
     0.0, 0.0,  0.0
  ]

  shapes.push({
    position: [0.0, 0.0, 0.0],
    verticies: verticies,
    pointCount: 3,
    colors: [
      1.0, 0.4, 0.6, 1.0,
      0.9, 0.4, 0.7, 1.0,
      0.8, 0.4, 0.9, 1.0
    ]
  })

  return shapes
}

var camera = {
  fovy: 45,
  near: 0.1,
  far: 600.0,
  pitch: 0.0,
  yaw: 0.0,
  xPos: -205.0,
  yPos: 205.0,
  zPos: -500.0  
}

drawScene.init(camera)

window.onmousemove = function(event) {
  if (!handleMove) { return }
  handleMove(event)
}

// drawScene(pathToShape([[107,277],[107,273],[107,267],[107,264],[107,261],[107,258],[107,246],[107,233],[109,220],[114,210],[122,199]]))

</script>

</body></html>